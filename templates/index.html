<!DOCTYPE html>
<html>
<head>
    <title>医院系统</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .operation-panel {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ccc;
            background: #f5f5f5;
            border-radius: 5px;
        }
        .operation-panel h2 {
            margin-top: 0;
            color: #2980b9;
        }
        .test-section {
            margin: 15px 0;
            padding: 10px;
            background: #ecf0f1;
            border-left: 4px solid #3498db;
        }
        button, .btn {
            padding: 8px 12px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        .btn-primary {
            background: #3498db;
            color: white;
        }
        .btn-primary:hover {
            background: #2980b9;
        }
        .btn-danger {
            background: #e74c3c;
            color: white;
        }
        .btn-danger:hover {
            background: #c0392b;
        }
        .btn-success {
            background: #2ecc71;
            color: white;
        }
        .btn-success:hover {
            background: #27ae60;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        ul li {
            margin: 5px 0;
        }
        ul li a {
            text-decoration: none;
            color: #3498db;
        }
        ul li a:hover {
            text-decoration: underline;
        }
        .form-inline {
            display: inline-block;
            margin-right: 10px;
        }
    </style>
</head>
<body>
<h1>欢迎使用医院信息管理系统</h1>

<div class="operation-panel">
    <h2>数据库高级操作演示</h2>
    
    <div class="test-section">
        <h3>事务操作测试</h3>
        <form action="/delete_records" method="post" class="form-inline">
            <input type="hidden" name="patient_id" value="P001">
            <button type="submit" class="btn-danger">执行事务删除(P001患者记录)</button>
        </form>
        <small>将删除P001患者的所有就诊记录和处方明细</small>
    </div>
    
    <div class="test-section">
        <h3>触发器测试</h3>
        <form action="/add_medicine" method="post" class="form-inline">
            <input type="hidden" name="medicine_id" value="M_TEST">
            <input type="hidden" name="name" value="测试药品">
            <input type="hidden" name="spec" value="100mg*10片">
            <input type="hidden" name="price" value="-5.00">
            <input type="hidden" name="manufacturer" value="测试药厂">
            <input type="hidden" name="stock" value="50">
            <button type="submit" class="btn-danger">测试触发器(添加负价药品)</button>
        </form>
        
        <form action="/add_medicine" method="post" class="form-inline">
            <input type="hidden" name="medicine_id" value="M_TEST">
            <input type="hidden" name="name" value="测试药品">
            <input type="hidden" name="spec" value="100mg*10片">
            <input type="hidden" name="price" value="10.00">
            <input type="hidden" name="manufacturer" value="测试药厂">
            <input type="hidden" name="stock" value="50">
            <button type="submit" class="btn-success">测试添加有效药品</button>
        </form>
        <small>第一个按钮应被触发器拦截，第二个应成功添加</small>
    </div>
    
    <div class="test-section">
        <h3>存储过程测试</h3>
        <form action="/discharge" method="post" class="form-inline">
            <input type="hidden" name="hosp_id" value="H001">
            <input type="hidden" name="discharge_date" value="2025-06-01">
            <button type="submit" class="btn-primary">执行存储过程(H001出院)</button>
        </form>
<form action="/delete_invalid" method="post" class="form-inline">
                <input type="hidden" name="patient_id" value="INVALID">
                <button type="submit" class="btn-warning">
                    <span class="icon">⚠️</span>测试事务失败(无效患者ID)
                </button>
            </form>

        <small>将更新住院记录和释放床位</small>
    </div>
    
    <div class="test-section">
        <h3>视图查询</h3>
        <form action="/view_records" method="get" class="form-inline">
            <button type="submit" class="btn-primary">查询视图(患者就诊记录)</button>
        </form>
        <small>展示患者就诊视图数据</small>
    </div>
</div>

<div class="operation-panel">
    <h2>系统功能导航</h2>
    <ul>
        <li><a href="/patients">患者信息管理</a></li>
        <li><a href="/doctors">医生信息管理</a></li>
        <li><a href="/medicines">药品库存管理</a></li>
        <li><a href="/medical_records">就诊记录管理</a></li>
        <li><a href="/hospitalizations">住院管理</a></li>
            </ul>
</div>

<div class="operation-panel">
    <h2>测试数据管理</h2>
    <form action="/reset_test_data" method="post" class="form-inline">
        <button type="submit" class="btn-danger">重置测试数据</button>
    </form>
    <small>将恢复初始测试数据状态</small>
</div>
</body>
</html>